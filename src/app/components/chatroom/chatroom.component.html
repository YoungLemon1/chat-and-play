<h1>{{ currentUsername }} chatting with {{ otherUsername }}</h1>
<a [routerLink]="['/users-page', currentUsername]">Back</a>
<hr />
<div>
  <!--   <div *ngFor="let message of messages">
    <ng-container
      *ngIf="isMessageGameInvite(message); then gameInvite; else textMessage"
    ></ng-container>

    <ng-template #gameInvite>
      <div>
        <h6>
          {{ message.senderUsername }} has invited
          {{ message.recipientUsername }} to play {{ message.title }}
        </h6>
      </div>
    </ng-template>
    <ng-template #textMessage>
      <label>{{ message.senderUsername }}</label>
      <p>{{ message.text }}</p>
      <p>{{ message.createdTime | date : "HH:MM" }}</p>
      <hr />
    </ng-template>
  </div> -->

  <div *ngFor="let message of messages">
    <div *ngIf="!isMessageGameInvite(message)">
      <label>{{ message.senderUsername }}</label>
      <p>{{ message.text }}</p>
      <p>{{ message.createdTime | date : "HH:MM" }}</p>
      <hr />
    </div>
  </div>

  <div id="message-bar">
    <form id="message-from">
      <input
        id="messageText"
        name="messageText"
        type="text"
        class="form-control"
        required
        minlength="1"
        maxlength="26"
        [(ngModel)]="text"
        #name="ngModel"
        placeholder="Write something..."
      />
      <button (click)="openGameSelection()">ğŸš€</button>
      <button [disabled]="text === ''" (click)="sendMessage()">Send</button>
    </form>
  </div>
  <div id="game-selection" *ngIf="showGames">
    <ul id="games" *ngFor="let game of games">
      <li id="rock-paper-scissors">
        <figure class="game-link" (click)="inviteToGame(game.link, game.title)">
          <img src="{{ game.imageURL }}" alt="{{ game.title }}" />
          <figcaption>{{ game.title }}</figcaption>
        </figure>
      </li>
      <li></li>
      <li></li>
    </ul>
  </div>
</div>
